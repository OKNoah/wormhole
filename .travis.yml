language: go

go:
  - 1.8.x
  - 1.x

install: make setup
sudo: required # required for docker service
services:
  # Required for dockertest
  - docker
script:
  # check compilation on supported targets
  - GOOS=linux   GOARCH=amd64 make binaries
  - GOOS=windows GOARCH=amd64 make binaries
  - GOOS=darwin  GOARCH=amd64 make binaries
  - GOOS=linux   GOARCH=arm   make binaries
  - GOOS=linux   GOARCH=386   make binaries
  # run tests
  - make ci
